<%- include('partials/header', { title: 'Cadastro de Serviço' }) %>

<div class="container">
  <h2>Cadastro de Novo Serviço</h2>
  <form id="serviceForm" action="/services/register" method="POST">
    <!-- Tipo de Serviço -->
    <label for="serviceType">Tipo de Serviço:</label>
    <input type="text" id="serviceType" name="serviceType" required>

    <!-- Prazo para Realizar -->
    <label for="dueDate">Prazo para Realizar (em dias):</label>
    <input type="number" id="dueDate" name="dueDate" required>

    <!-- Valor do Serviço -->
    <label for="value">Valor do Serviço (R$):</label>
    <input type="number" step="0.01" id="value" name="value" required>

    <!-- Categoria -->
    <label for="category">Categoria:</label>
    <select id="category" name="category">
      <% categories.forEach(category => { %>
        <option value="<%= category._id %>"><%= category.name %></option>
      <% }) %>
      <option value="new">Adicionar Nova Categoria</option>
    </select>

    <!-- Campo para adicionar nova categoria -->
    <div id="newCategoryDiv" style="display: none;">
      <label for="newCategory">Nova Categoria:</label>
      <input type="text" id="newCategory" name="newCategory">
    </div>

    <button type="submit">Cadastrar Serviço</button>
  </form>
</div>

<script>
  // Exibe campo para adicionar nova categoria, se necessário
  document.getElementById('category').addEventListener('change', function() {
    const newCategoryDiv = document.getElementById('newCategoryDiv');
    if (this.value === 'new') {
      newCategoryDiv.style.display = 'block';
    } else {
      newCategoryDiv.style.display = 'none';
    }
  });
</script>

<%- include('partials/footer') %>
